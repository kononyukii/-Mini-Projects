<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
  </head>
  <body>
    <h1>Количество символов в тексте</h1>
    <textarea name="" id="" cols="30" rows="10"></textarea>
    <p></p>
    <script>
      let textarea = document.querySelector("textarea");
      let par = document.querySelector("p");

      textarea.addEventListener("blur", function () {
        let arr = textarea.value.split("");
        let i = 0;

        for (let elem of arr) {
          if (elem != " ") {
            i++;
          }
        }
        par.innerHTML = "В тексте " + i + " символов:";

        let allSymbols =
          "abcdefghijklmnopqrstuvwxyz0123456789йцукенгшщзхъфывапролджэячсмитьбю`-=~@#$%^&*()_+;'][\!:ЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮQWERTYUIOPASDFGHJKLZXCVBNM";
        let statistic = '';

        for (let symbol of allSymbols) {
            if (arr.indexOf(symbol) != -1) {
                statistic += ' ' + getPersentText(arr, symbol) + '; ';
            }
        }
        par.innerHTML +=  statistic;

        function getPersentText(arr, symb) {
            return symb + ': ' + Math.round(arr.filter((elem) => elem === symb).length / arr.length * 100) +'%';
        }
      });
    </script>
  </body>
</html>
